<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ST. TERESA'S TABLE TENNIS — APEX</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:ital,wght@0,300;0,500;1,300&family=Syne:wght@400;700;800&display=swap" rel="stylesheet"/>
<style>

/* ─────────────────────────────────────────────────────
   TOKENS
───────────────────────────────────────────────────── */
:root {
  --ink:    #0A0A0A;
  --plate:  #111;
  --edge:   #1E1E1E;
  --orange: #FF4E00;
  --blue:   #003FD4;
  --chalk:  #EEECE5;
  --muted:  rgba(238,236,229,.36);
  --f-disp: 'Bebas Neue', sans-serif;
  --f-ui:   'Syne', sans-serif;
  --f-mono: 'DM Mono', monospace;
}

/* ─────────────────────────────────────────────────────
   RESET / BASE
───────────────────────────────────────────────────── */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:auto; }
body {
  background: var(--ink);
  color: var(--chalk);
  font-family: var(--f-mono);
  overflow-x: hidden;
  cursor: none;
  -webkit-font-smoothing: antialiased;
}

/* ─────────────────────────────────────────────────────
   CURSOR  — Lusion-style: morphs to hovered element
───────────────────────────────────────────────────── */
#cursor {
  position: fixed;
  top: 0; left: 0;
  pointer-events: none;
  z-index: 9999;
  mix-blend-mode: exclusion;
}
#cursor-ball {
  width: 12px;
  height: 12px;
  background: var(--chalk);
  border-radius: 50%;
  position: absolute;
  transform: translate(-50%, -50%);
  transition:
    width  .45s cubic-bezier(.17,.67,.35,1.2),
    height .45s cubic-bezier(.17,.67,.35,1.2),
    border-radius .4s ease,
    background .3s ease;
}
/* States driven by JS data-cursor attr */
body.cur-link   #cursor-ball { width:44px; height:44px; }
body.cur-btn    #cursor-ball { width:64px; height:64px; border-radius:4px; }
body.cur-card   #cursor-ball { width:80px; height:28px; border-radius:3px; }
body.cur-text   #cursor-ball { width:2px;  height:28px; border-radius:1px; background:var(--orange); }

/* ─────────────────────────────────────────────────────
   NOISE OVERLAY
───────────────────────────────────────────────────── */
body::before {
  content:'';
  position:fixed; inset:0; z-index:9990;
  pointer-events:none; opacity:.028;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 200px;
}

/* ─────────────────────────────────────────────────────
   NAV
───────────────────────────────────────────────────── */
nav {
  position: fixed; top:0; left:0; right:0;
  padding: 28px 48px;
  display: flex; justify-content:space-between; align-items:center;
  z-index: 100;
  /* live blur from scroll — toggled via JS */
}
nav.scrolled {
  background: rgba(10,10,10,.82);
  backdrop-filter: blur(18px);
  border-bottom: 1px solid var(--edge);
}
.nav-logo {
  font-family: var(--f-disp);
  font-size: 20px;
  letter-spacing: .1em;
  color: var(--chalk);
  text-decoration: none;
  data-cursor: link;
}
.nav-logo em { color:var(--orange); font-style:normal; }

.nav-links {
  display: flex; gap:8px; list-style:none;
}

/* MAGNETIC NAV LINKS — the core Lusion interaction */
.mag-link {
  position: relative;
  display: inline-flex;
  align-items: center;
  padding: 10px 22px;
  text-decoration: none;
  font-family: var(--f-ui);
  font-size: 13px;
  font-weight: 400;
  color: rgba(238,236,229,.55);
  letter-spacing: .04em;
  transition: color .3s;
  /* magnetic transform handled via JS */
}
.mag-link span { position:relative; z-index:1; pointer-events:none; }
.mag-link:hover { color: var(--chalk); }

/* Hover pill — morphs from nothing to rounded slab */
.mag-link::after {
  content: '';
  position: absolute; inset:0;
  border-radius: 99px;
  background: var(--plate);
  transform: scale(.7);
  opacity: 0;
  transition:
    transform .4s cubic-bezier(.17,.67,.35,1.2),
    opacity .3s ease;
}
.mag-link:hover::after,
.mag-link.active::after {
  transform: scale(1);
  opacity: 1;
}

.nav-cta {
  font-family: var(--f-ui);
  font-size: 13px; font-weight: 700;
  color: var(--ink);
  background: var(--chalk);
  border: none;
  padding: 11px 26px;
  border-radius: 99px;
  cursor: none;
  letter-spacing: .04em;
  transition: background .3s, transform .3s;
  position: relative; overflow: hidden;
}
.nav-cta::before {
  content:'';
  position:absolute; inset:0;
  background: var(--orange);
  transform: translateX(-101%);
  transition: transform .45s cubic-bezier(.77,0,.175,1);
}
.nav-cta:hover { color:var(--chalk); }
.nav-cta:hover::before { transform: translateX(0); }
.nav-cta span { position:relative; z-index:1; }

/* ─────────────────────────────────────────────────────
   HERO
───────────────────────────────────────────────────── */
#hero {
  min-height: 100vh;
  display: flex; flex-direction:column;
  justify-content: flex-end;
  padding: 0 48px 72px;
  position: relative; overflow: hidden;
}

/* Fluid court lines — SVG background layer */
.court-bg {
  position: absolute; inset:0;
  display: flex; align-items:center; justify-content:center;
  pointer-events:none;
}
.court-bg svg {
  width:100%; height:100%;
  opacity:.032;
  stroke: var(--chalk); fill:none; stroke-width:1;
}

/* Floating stats in top-right */
.hero-aside {
  position: absolute;
  top: 120px; right: 48px;
  display: flex; flex-direction:column; gap:4px;
  text-align: right;
  opacity: 0;
}
.hero-aside-row {
  font-family: var(--f-mono);
  font-size: 10px;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: var(--muted);
}
.hero-aside-row strong {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 22px;
  color: var(--chalk);
  letter-spacing: .06em;
  display: block;
  margin-bottom: 2px;
}

/* Main headline */
.hero-hed {
  font-family: var(--f-disp);
  font-size: clamp(80px, 13.5vw, 210px);
  line-height: .88;
  letter-spacing: -.01em;
  position: relative; z-index:2;
}
.hero-hed .line { overflow:hidden; display:block; }
.hero-hed .word {
  display: inline-block;
  transform: translateY(110%);
}
.hero-hed .col { color:var(--orange); }

.hero-foot {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-top: 48px;
  position: relative; z-index:2;
}
.hero-sub {
  font-size: 13px;
  line-height: 1.85;
  color: var(--muted);
  max-width: 340px;
  opacity: 0;
}
.hero-scroll-hint {
  display: flex; align-items:center; gap:12px;
  font-size: 10px; letter-spacing:.22em; text-transform:uppercase;
  color: var(--muted);
  opacity: 0;
}
.scroll-circle {
  width: 42px; height: 42px;
  border: 1px solid var(--edge);
  border-radius: 50%;
  display: flex; align-items:center; justify-content:center;
  font-size: 18px;
  animation: scrollBob 2.2s ease-in-out infinite;
}
@keyframes scrollBob {
  0%,100%{ transform:translateY(0); }
  50%    { transform:translateY(5px); }
}

/* ─────────────────────────────────────────────────────
   MARQUEE
───────────────────────────────────────────────────── */
.marquee-band {
  overflow: hidden;
  padding: 20px 0;
  border-top: 1px solid var(--edge);
  border-bottom: 1px solid var(--edge);
  background: var(--plate);
}
.marquee-inner {
  display: flex; gap: 64px;
  white-space: nowrap;
  will-change: transform;
}
.marquee-word {
  font-family: var(--f-disp);
  font-size: clamp(22px, 3.5vw, 44px);
  letter-spacing: .08em;
  color: transparent;
  -webkit-text-stroke: 1px rgba(238,236,229,.14);
  text-transform: uppercase;
  display: flex; align-items:center; gap:64px;
}
.marquee-word .pip {
  width:6px; height:6px; border-radius:50%;
  background:var(--orange); flex-shrink:0;
}

/* ─────────────────────────────────────────────────────
   ABOUT SECTION — Lusion-style "breathing" text
───────────────────────────────────────────────────── */
#about {
  padding: 120px 48px;
  display: grid;
  grid-template-columns: 1fr 1.6fr;
  gap: 80px;
  align-items: start;
}
.about-label {
  font-size: 10px; letter-spacing:.3em; text-transform:uppercase;
  color:var(--orange); margin-bottom:20px;
  display:flex; align-items:center; gap:10px;
}
.about-label::before {
  content:''; display:block;
  width:24px; height:1px; background:var(--orange);
}
.about-sticky { position:sticky; top:120px; }
.about-year {
  font-family: var(--f-disp);
  font-size: clamp(80px,10vw,140px);
  color: transparent;
  -webkit-text-stroke:1px rgba(238,236,229,.07);
  line-height:1;
  user-select:none;
}

/* The big breathing body copy */
.about-body p {
  font-family: var(--f-ui);
  font-size: clamp(22px, 3vw, 38px);
  line-height: 1.3;
  font-weight: 400;
  color: var(--muted);
  margin-bottom: .6em;
  /* words reveal weight on scroll — JS does this */
}
.about-body p .w {
  display: inline;
  transition: color .4s ease, opacity .4s ease;
}
.about-body p .w.lit { color: var(--chalk); opacity:1; }

/* ─────────────────────────────────────────────────────
   PROGRAMS — Magnetic cards
───────────────────────────────────────────────────── */
#programs {
  padding: 0 48px 140px;
}
.programs-header {
  display: flex; justify-content:space-between; align-items:flex-end;
  margin-bottom: 60px;
}
.programs-h {
  font-family: var(--f-disp);
  font-size: clamp(48px,7vw,100px);
  letter-spacing:.02em; line-height:.95;
}
.programs-h .col { color: var(--orange); }
.programs-count {
  font-family: var(--f-mono);
  font-size: 11px; letter-spacing:.2em;
  color: var(--muted);
  align-self: flex-end;
  padding-bottom: 8px;
}

.programs-grid {
  display: grid;
  grid-template-columns: repeat(3,1fr);
  gap: 2px;
}

/* MAGNETIC CARD */
.prog-card {
  background: var(--plate);
  padding: 40px 36px 36px;
  position: relative; overflow:hidden;
  /* JS injects transform for magnetic tilt */
  transition: background .4s;
}
.prog-card::before {
  /* color sweep on hover */
  content:'';
  position:absolute; inset:0;
  background: linear-gradient(160deg, rgba(255,78,0,.07) 0%, transparent 60%);
  opacity:0; transition: opacity .5s;
}
.prog-card:hover::before { opacity:1; }

/* Top accent line — grows on hover */
.prog-card::after {
  content:'';
  position:absolute; top:0; left:0;
  width:0; height:2px;
  background: var(--orange);
  transition: width .5s cubic-bezier(.77,0,.175,1);
}
.prog-card:hover::after { width:100%; }

.card-num {
  font-family: var(--f-disp);
  font-size: 72px;
  color: rgba(238,236,229,.04);
  line-height:1;
  position:absolute; top:24px; right:28px;
  user-select:none;
  transition: color .4s, transform .5s cubic-bezier(.17,.67,.35,1.2);
}
.prog-card:hover .card-num {
  color: rgba(255,78,0,.08);
  transform: scale(1.1) translateY(-4px);
}

.card-tag {
  font-size: 9px; letter-spacing:.28em; text-transform:uppercase;
  color: var(--orange); margin-bottom:16px;
}
.card-title {
  font-family: var(--f-disp);
  font-size: clamp(28px,3vw,44px);
  letter-spacing:.02em; line-height:1.05;
  color: var(--chalk);
  margin-bottom: 20px;
}
.card-body {
  font-size: 12px; line-height:1.9;
  color: var(--muted); margin-bottom:32px;
}
.card-footer {
  display: flex; justify-content:space-between; align-items:center;
  padding-top: 24px;
  border-top: 1px solid var(--edge);
}
.card-stat {
  font-family: 'Bebas Neue',sans-serif;
  font-size: 32px; color:var(--chalk);
}
.card-stat small {
  font-family: var(--f-mono);
  font-size:10px; color:var(--muted);
  margin-left:4px; letter-spacing:.1em;
}

/* Magnetic arrow link */
.card-arrow {
  width: 40px; height:40px;
  border: 1px solid var(--edge);
  border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  font-size:18px; color:var(--chalk);
  text-decoration:none;
  transition:
    background .3s,
    border-color .3s,
    transform .4s cubic-bezier(.17,.67,.35,1.2);
  /* JS adds magnetic transform */
}
.prog-card:hover .card-arrow {
  background: var(--orange);
  border-color: var(--orange);
  transform: rotate(-45deg) scale(1.1);
}

/* ─────────────────────────────────────────────────────
   NOTIFICATION HUB
───────────────────────────────────────────────────── */
#notifs {
  border-top: 1px solid var(--edge);
  padding: 80px 48px 120px;
  background: var(--plate);
}
.notifs-header {
  display:flex; justify-content:space-between; align-items:flex-end;
  margin-bottom: 48px;
}
.notifs-h {
  font-family: var(--f-disp);
  font-size: clamp(36px,5vw,72px);
  letter-spacing:.02em; line-height:1;
}
.live-badge {
  display:flex; align-items:center; gap:8px;
  font-size: 10px; letter-spacing:.2em; text-transform:uppercase;
  color: var(--orange); padding-bottom:6px;
}
.live-dot {
  width:8px; height:8px; border-radius:50%;
  background: var(--orange);
  box-shadow: 0 0 10px var(--orange);
  animation: livePulse 1.4s ease-in-out infinite;
}
@keyframes livePulse {
  0%,100%{ opacity:1; transform:scale(1); }
  50%    { opacity:.3; transform:scale(.55); }
}

/* Each notification row */
.notif-row {
  display: flex; align-items:center; gap:24px;
  padding: 24px 0;
  border-bottom: 1px solid var(--edge);
  position: relative; cursor:none;
  /* hover state is JS-driven via magnetic nudge */
}
.notif-row::before {
  content:'';
  position:absolute; inset:0 -48px;
  background: rgba(255,78,0,.03);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .4s cubic-bezier(.77,0,.175,1);
}
.notif-row:hover::before { transform: scaleX(1); }

.notif-indicator {
  width:8px; height:8px; border-radius:50%;
  flex-shrink:0;
  background: var(--edge);
  transition: background .3s, box-shadow .3s;
}
.notif-row.is-live .notif-indicator {
  background: var(--orange);
  box-shadow: 0 0 12px var(--orange);
  animation: livePulse 1.4s ease-in-out infinite;
}

.notif-meta {
  flex:1; min-width:0;
}
.notif-tag {
  font-size:9px; letter-spacing:.25em; text-transform:uppercase;
  color: var(--muted); margin-bottom:5px;
}
.notif-row.is-live .notif-tag { color:var(--orange); }
.notif-title {
  font-family: var(--f-disp);
  font-size: clamp(18px,2.2vw,28px);
  letter-spacing:.02em;
  color: var(--chalk);
  /* horizontal shimmer on hover */
  position:relative; overflow:hidden;
  display:inline-block;
}
.notif-time {
  font-size: 10px; letter-spacing:.1em;
  color: var(--muted); margin-top:4px;
}
.notif-action {
  width:36px; height:36px; border-radius:50%;
  border: 1px solid var(--edge);
  display:flex; align-items:center; justify-content:center;
  font-size:16px; color:var(--muted);
  flex-shrink:0;
  transition:
    transform .4s cubic-bezier(.17,.67,.35,1.2),
    background .3s, border-color .3s, color .3s;
}
.notif-row:hover .notif-action {
  background:var(--orange); border-color:var(--orange);
  color:var(--ink);
  transform: rotate(-45deg);
}

/* ─────────────────────────────────────────────────────
   JOIN / CTA
───────────────────────────────────────────────────── */
#join {
  padding: 140px 48px;
  text-align: center;
  position:relative; overflow:hidden;
}
.join-bg-word {
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  font-family:var(--f-disp);
  font-size:clamp(100px,20vw,280px);
  color:transparent;
  -webkit-text-stroke:1px rgba(238,236,229,.03);
  white-space:nowrap; user-select:none;
  pointer-events:none;
  letter-spacing:-.02em;
}
.join-hed {
  font-family:var(--f-disp);
  font-size:clamp(60px,9vw,130px);
  line-height:.92; letter-spacing:-.01em;
  position:relative; z-index:1;
  margin-bottom: 36px;
}
.join-hed .col { color:var(--orange); }
.join-sub {
  font-size:13px; line-height:1.85;
  color:var(--muted); max-width:400px;
  margin:0 auto 48px;
  position:relative; z-index:1;
}

/* THE BIG MAGNETIC BUTTON — Lusion's signature move */
.mag-btn-wrap {
  display: inline-block;
  position:relative; z-index:1;
}
.mag-btn {
  display: inline-flex; align-items:center; gap:16px;
  background: var(--chalk);
  color: var(--ink);
  border:none;
  padding: 20px 44px;
  border-radius: 99px;
  font-family: var(--f-ui);
  font-size: 15px; font-weight:700;
  letter-spacing:.04em;
  cursor:none;
  position:relative; overflow:hidden;
  transition: color .4s;
}
.mag-btn::before {
  content:'';
  position:absolute; inset:0; border-radius:inherit;
  background:var(--orange);
  transform:translateY(101%);
  transition: transform .5s cubic-bezier(.77,0,.175,1);
}
.mag-btn:hover { color:var(--chalk); }
.mag-btn:hover::before { transform:translateY(0); }
.mag-btn span { position:relative; z-index:1; }
.mag-btn-icon {
  position:relative; z-index:1;
  width:24px; height:24px; border-radius:50%;
  background:var(--orange);
  display:flex; align-items:center; justify-content:center;
  font-size:14px;
  transition: background .4s, transform .4s cubic-bezier(.17,.67,.35,1.2);
}
.mag-btn:hover .mag-btn-icon {
  background:var(--chalk);
  transform: rotate(-45deg) scale(1.1);
}

/* ─────────────────────────────────────────────────────
   FOOTER
───────────────────────────────────────────────────── */
footer {
  border-top:1px solid var(--edge);
  padding: 48px;
  display:flex; justify-content:space-between; align-items:center;
}
.foot-logo {
  font-family:var(--f-disp);
  font-size:28px; letter-spacing:.08em;
  color:rgba(238,236,229,.08);
}
.foot-copy {
  font-size:10px; letter-spacing:.12em;
  color:var(--muted); text-align:right;
}
.foot-copy a { color:var(--orange); text-decoration:none; }

/* ─────────────────────────────────────────────────────
   BLOG — Lusion-inspired: image follows cursor inside
   card, title weight shifts, horizontal featured strip
───────────────────────────────────────────────────── */
#blog {
  padding: 120px 48px;
  background: var(--ink);
  border-top: 1px solid var(--edge);
}

.blog-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 72px;
}
.blog-h {
  font-family: var(--f-disp);
  font-size: clamp(48px, 7vw, 100px);
  letter-spacing: .02em;
  line-height: .92;
}
.blog-h .col { color: var(--orange); }

.blog-all-link {
  font-family: var(--f-ui);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  color: var(--muted);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 10px;
  padding-bottom: 6px;
  position: relative;
  transition: color .3s;
}
.blog-all-link::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0;
  width: 0; height: 1px;
  background: var(--orange);
  transition: width .45s cubic-bezier(.77,0,.175,1);
}
.blog-all-link:hover { color: var(--chalk); }
.blog-all-link:hover::after { width: 100%; }
.blog-all-link .arrow-circle {
  width: 32px; height: 32px;
  border: 1px solid var(--edge);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
  transition: background .3s, border-color .3s, transform .4s cubic-bezier(.17,.67,.35,1.2);
}
.blog-all-link:hover .arrow-circle {
  background: var(--orange);
  border-color: var(--orange);
  transform: rotate(-45deg);
}

/* ── FEATURED POST (big one) ── */
.blog-featured {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2px;
  margin-bottom: 2px;
  position: relative;
}

.blog-feat-img {
  position: relative;
  overflow: hidden;
  aspect-ratio: 4/3;
  background: var(--plate);
  cursor: none;
}
/* The image-follows-cursor canvas effect — pure CSS layer */
.blog-feat-img-inner {
  position: absolute;
  inset: -12%;           /* oversized so it can shift */
  width: 124%; height: 124%;
  will-change: transform;
  transition: transform .08s linear;  /* JS overrides this with lerp */
  background-size: cover;
  background-position: center;
}
.feat-img-1 {
  background-image:
    linear-gradient(135deg, #0d0300 0%, #3a1200 35%, var(--orange) 70%, #ff8844 100%);
}
/* Court diagram overlay on the gradient */
.feat-img-1::after {
  content: '';
  position: absolute; inset: 0;
  background:
    repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 38px,
      rgba(255,255,255,.04) 38px,
      rgba(255,255,255,.04) 39px
    ),
    repeating-linear-gradient(
      90deg,
      transparent 0px,
      transparent 38px,
      rgba(255,255,255,.04) 38px,
      rgba(255,255,255,.04) 39px
    );
}

.blog-feat-body {
  background: var(--plate);
  padding: 48px 44px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  position: relative;
  overflow: hidden;
}
/* Top accent sweep */
.blog-feat-body::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 0; height: 2px;
  background: var(--orange);
  transition: width .6s cubic-bezier(.77,0,.175,1);
}
.blog-featured:hover .blog-feat-body::before { width: 100%; }

.blog-feat-eyebrow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 32px;
}
.blog-feat-tag {
  font-size: 9px;
  letter-spacing: .28em;
  text-transform: uppercase;
  color: var(--orange);
}
.blog-feat-num {
  font-family: var(--f-disp);
  font-size: 13px;
  letter-spacing: .1em;
  color: var(--muted);
}

.blog-feat-title {
  font-family: var(--f-disp);
  font-size: clamp(28px, 3.5vw, 52px);
  letter-spacing: .01em;
  line-height: 1.0;
  color: var(--chalk);
  margin-bottom: 24px;
  /* Each word gets a .bw span — JS adds these */
}
.blog-feat-title .bw {
  display: inline-block;
  transition: transform .35s cubic-bezier(.17,.67,.35,1.2),
              opacity .35s ease;
}

.blog-feat-excerpt {
  font-size: 12px;
  line-height: 1.85;
  color: var(--muted);
  max-width: 380px;
  margin-bottom: 40px;
}

.blog-feat-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.blog-feat-author {
  display: flex;
  align-items: center;
  gap: 12px;
}
.author-avatar {
  width: 36px; height: 36px;
  border-radius: 50%;
  background: var(--edge);
  display: flex; align-items: center; justify-content: center;
  font-size: 13px;
  border: 1px solid #2a2a2a;
  overflow: hidden;
  position: relative;
}
/* Avatar inner fill — colour-coded per post */
.author-avatar::before {
  content: attr(data-initials);
  font-family: var(--f-ui);
  font-size: 11px;
  font-weight: 700;
  color: var(--ink);
  position: absolute;
}
.author-info { line-height: 1.3; }
.author-name {
  font-size: 11px;
  font-weight: 500;
  color: var(--chalk);
  font-family: var(--f-ui);
}
.author-date {
  font-size: 9px;
  letter-spacing: .12em;
  color: var(--muted);
}

.blog-read-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: var(--f-ui);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: .06em;
  color: var(--chalk);
  text-decoration: none;
  padding: 12px 22px;
  border: 1px solid var(--edge);
  border-radius: 99px;
  transition: background .3s, border-color .3s, color .3s;
  cursor: none;
}
.blog-read-btn:hover {
  background: var(--orange);
  border-color: var(--orange);
  color: var(--ink);
}
.blog-read-btn .btn-arrow {
  transition: transform .4s cubic-bezier(.17,.67,.35,1.2);
}
.blog-read-btn:hover .btn-arrow { transform: rotate(-45deg) translateX(2px); }

/* ── SMALL CARDS GRID ── */
.blog-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2px;
}

.blog-card {
  background: var(--plate);
  position: relative;
  overflow: hidden;
  cursor: none;
  display: flex;
  flex-direction: column;
}

/* Image thumbnail with cursor-follow */
.blog-card-thumb {
  position: relative;
  overflow: hidden;
  aspect-ratio: 16/9;
  background: var(--ink);
}
.blog-card-thumb-inner {
  position: absolute;
  inset: -8%;
  width: 116%; height: 116%;
  background-size: cover;
  background-position: center;
  will-change: transform;
  transition: transform 1s cubic-bezier(.25,.46,.45,.94);
}
.blog-card:hover .blog-card-thumb-inner {
  transform: scale(1.08);
}
.thumb-2 { background-image: linear-gradient(160deg,#00050e,#001a66 50%,#003FD4 80%,#4488ff); }
.thumb-3 { background-image: linear-gradient(160deg,#080800,#332200 50%,#996600 80%,#ffcc00); }
.thumb-4 { background-image: linear-gradient(160deg,#050008,#1a0033 50%,#5500aa 80%,#bb44ff); }

/* Category chip on thumbnail */
.thumb-chip {
  position: absolute;
  top: 14px; left: 14px;
  background: rgba(10,10,10,.75);
  backdrop-filter: blur(6px);
  font-size: 8px;
  letter-spacing: .2em;
  text-transform: uppercase;
  color: var(--chalk);
  padding: 5px 10px;
  border-radius: 99px;
  border: 1px solid rgba(238,236,229,.1);
  z-index: 2;
}

.blog-card-body {
  padding: 24px 24px 20px;
  flex: 1;
  display: flex;
  flex-direction: column;
}
.blog-card-title {
  font-family: var(--f-disp);
  font-size: clamp(18px, 2vw, 24px);
  letter-spacing: .02em;
  line-height: 1.1;
  color: var(--chalk);
  margin-bottom: 10px;
  flex: 1;
}
.blog-card-excerpt {
  font-size: 11px;
  line-height: 1.75;
  color: var(--muted);
  margin-bottom: 20px;
}
.blog-card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 16px;
  border-top: 1px solid var(--edge);
}
.blog-card-date {
  font-size: 9px;
  letter-spacing: .15em;
  color: var(--muted);
}

/* The tiny magnetic read arrow per card */
.card-read-arrow {
  width: 32px; height: 32px;
  border-radius: 50%;
  border: 1px solid var(--edge);
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
  color: var(--muted);
  text-decoration: none;
  transition:
    background .3s,
    border-color .3s,
    color .3s,
    transform .4s cubic-bezier(.17,.67,.35,1.2);
}
.blog-card:hover .card-read-arrow {
  background: var(--orange);
  border-color: var(--orange);
  color: var(--ink);
  transform: rotate(-45deg);
}

/* Progress bar that fills on hover — reads time */
.blog-card-progress {
  position: absolute;
  bottom: 0; left: 0;
  width: 0%; height: 2px;
  background: var(--orange);
  transition: width .5s cubic-bezier(.77,0,.175,1);
}
.blog-card:hover .blog-card-progress { width: 100%; }

/* ─────────────────────────────────────────────────────
   SCROLL REVEAL BASE STATE
───────────────────────────────────────────────────── */
.reveal { opacity:0; transform:translateY(40px); }

/* ─────────────────────────────────────────────────────
   RESPONSIVE
───────────────────────────────────────────────────── */
@media(max-width:860px){
  nav { padding:20px 24px; }
  .nav-links { display:none; }
  #hero,#about,#programs,#notifs,#blog,#join,footer { padding-left:24px; padding-right:24px; }
  .programs-grid { grid-template-columns:1fr; }
  #about { grid-template-columns:1fr; gap:40px; }
  .programs-header { flex-direction:column; align-items:flex-start; gap:8px; }
  .blog-header { flex-direction:column; align-items:flex-start; gap:16px; }
  .blog-featured { grid-template-columns:1fr; }
  .blog-grid { grid-template-columns:1fr; }
}

</style>
</head>
<body>

<!-- ─── CURSOR ─── -->
<div id="cursor"><div id="cursor-ball"></div></div>

<!-- ─── NAV ─── -->
<nav id="nav">
  <a href="#" class="nav-logo" data-mag>ST<em>.</em> TERESA'S <em>TT</em></a>
  <ul class="nav-links">
    <li><a href="#programs" class="mag-link" data-mag><span>Programs</span></a></li>
    <li><a href="#notifs"   class="mag-link" data-mag><span>Updates</span></a></li>
    <li><a href="#blog"     class="mag-link" data-mag><span>Stories</span></a></li>
    <li><a href="#join"     class="mag-link" data-mag><span>Membership</span></a></li>
  </ul>
  <button class="nav-cta" data-mag data-cursor="btn"><span>Play Now</span></button>
</nav>

<!-- ─── HERO ─── -->
<section id="hero">
  <!-- Court SVG background -->
  <div class="court-bg">
    <svg viewBox="0 0 1400 800" preserveAspectRatio="xMidYMid slice">
      <!-- outer table -->
      <rect x="100" y="100" width="1200" height="600" rx="4"/>
      <!-- center line -->
      <line x1="700" y1="100" x2="700" y2="700"/>
      <!-- net -->
      <line x1="690" y1="130" x2="690" y2="670" stroke-width="3"/>
      <line x1="710" y1="130" x2="710" y2="670" stroke-width="3"/>
      <!-- mid mark -->
      <line x1="100" y1="400" x2="1300" y2="400"/>
      <!-- court lines -->
      <line x1="100" y1="250" x2="690" y2="250" stroke-dasharray="8 6"/>
      <line x1="710" y1="250" x2="1300" y2="250" stroke-dasharray="8 6"/>
      <line x1="100" y1="550" x2="690" y2="550" stroke-dasharray="8 6"/>
      <line x1="710" y1="550" x2="1300" y2="550" stroke-dasharray="8 6"/>
    </svg>
  </div>

  <!-- Aside stats -->
  <div class="hero-aside" id="hero-aside">
    <div class="hero-aside-row"><strong>247</strong>Active Members</div>
    <div class="hero-aside-row"><strong>18</strong>National Titles</div>
    <div class="hero-aside-row"><strong>1998</strong>Est. Nairobi</div>
  </div>

  <!-- Headline -->
  <div style="position:relative;z-index:2;">
    <h1 class="hero-hed">
      <span class="line"><span class="word">ST.</span></span>
      <span class="line"><span class="word">TERESA'S</span></span>
      <span class="line"><span class="word col">TABLE</span></span>
      <span class="line"><span class="word">TENNIS</span></span>
    </h1>
  </div>

  <div class="hero-foot">
    <p class="hero-sub">East Africa's most competitive training program. Built for precision. Forged under pressure.</p>
    <div class="hero-scroll-hint" id="scroll-hint">
      <div class="scroll-circle">↓</div>
      <span>Scroll to explore</span>
    </div>
  </div>
</section>

<!-- ─── MARQUEE ─── -->
<div class="marquee-band">
  <div class="marquee-inner" id="mq">
    <div class="marquee-word">SERVE<span class="pip"></span>SMASH<span class="pip"></span>LOOP<span class="pip"></span>BLOCK<span class="pip"></span>FLICK<span class="pip"></span>RALLY<span class="pip"></span>DRIVE<span class="pip"></span>PUSH<span class="pip"></span>CHOP<span class="pip"></span></div>
    <div class="marquee-word">SERVE<span class="pip"></span>SMASH<span class="pip"></span>LOOP<span class="pip"></span>BLOCK<span class="pip"></span>FLICK<span class="pip"></span>RALLY<span class="pip"></span>DRIVE<span class="pip"></span>PUSH<span class="pip"></span>CHOP<span class="pip"></span></div>
  </div>
</div>

<!-- ─── ABOUT ─── -->
<section id="about">
  <div class="about-sticky">
    <div class="about-label">About the Club</div>
    <div class="about-year">27<br/>Years</div>
  </div>
  <div class="about-body reveal">
    <p>
      <span class="w">We are not a school team.</span>
      <span class="w">We are a production line for</span>
      <span class="w">East African champions —</span>
      <span class="w">operating out of Nairobi</span>
      <span class="w">since 1998.</span>
    </p>
    <p style="margin-top:32px">
      <span class="w">Six Butterfly tables.</span>
      <span class="w">Taraflex courts.</span>
      <span class="w">Coaches who have stood</span>
      <span class="w">on national podiums.</span>
      <span class="w">A program built around</span>
      <span class="w">what actually works.</span>
    </p>
    <p style="margin-top:32px">
      <span class="w">You show up ready to work.</span>
      <span class="w">We take it from there.</span>
    </p>
  </div>
</section>

<!-- ─── PROGRAMS ─── -->
<section id="programs">
  <div class="programs-header">
    <h2 class="programs-h reveal">CHOOSE<br/><span class="col">YOUR LEVEL</span></h2>
    <span class="programs-count reveal">03 Programs</span>
  </div>
  <div class="programs-grid">

    <div class="prog-card reveal" data-mag-card>
      <div class="card-num">01</div>
      <div class="card-tag">Juniors · Ages 8–16</div>
      <h3 class="card-title">Foundation Program</h3>
      <p class="card-body">Footwork fundamentals, grip biomechanics, and serve mechanics. We build the base before we build the weapon.</p>
      <div class="card-footer">
        <div class="card-stat">48 <small>players</small></div>
        <a href="#join" class="card-arrow" data-mag>→</a>
      </div>
    </div>

    <div class="prog-card reveal" data-mag-card style="margin-top:40px">
      <div class="card-num">02</div>
      <div class="card-tag">Open · Ages 16+</div>
      <h3 class="card-title">Competitive Track</h3>
      <p class="card-body">Multi-ball drills, tactical analysis, tournament preparation, and match simulation. For players who want results.</p>
      <div class="card-footer">
        <div class="card-stat">31 <small>players</small></div>
        <a href="#join" class="card-arrow" data-mag>→</a>
      </div>
    </div>

    <div class="prog-card reveal" data-mag-card style="margin-top:80px">
      <div class="card-num">03</div>
      <div class="card-tag">Elite · Invite Only</div>
      <h3 class="card-title">APEX Squad</h3>
      <p class="card-body">Twice-daily sessions, sports psychology, nutrition protocols. The inner circle where national champions are shaped.</p>
      <div class="card-footer">
        <div class="card-stat">12 <small>athletes</small></div>
        <a href="#join" class="card-arrow" data-mag>→</a>
      </div>
    </div>

  </div>
</section>

<!-- ─── NOTIFICATIONS ─── -->
<section id="notifs">
  <div class="notifs-header">
    <h2 class="notifs-h reveal">WHAT'S<br/>HAPPENING</h2>
    <div class="live-badge reveal">
      <div class="live-dot"></div>
      Live Updates
    </div>
  </div>

  <div class="notif-row is-live reveal">
    <div class="notif-indicator"></div>
    <div class="notif-meta">
      <div class="notif-tag">Breaking</div>
      <div class="notif-title">Q3 Championship Registration Now Open</div>
      <div class="notif-time">Just now · Deadline 15 Aug 2025</div>
    </div>
    <div class="notif-action">→</div>
  </div>

  <div class="notif-row reveal">
    <div class="notif-indicator"></div>
    <div class="notif-meta">
      <div class="notif-tag">Achievement</div>
      <div class="notif-title">Coach Mwangi Named EA Region Coach of the Year</div>
      <div class="notif-time">2 hours ago · 4 min read</div>
    </div>
    <div class="notif-action">→</div>
  </div>

  <div class="notif-row reveal">
    <div class="notif-indicator"></div>
    <div class="notif-meta">
      <div class="notif-tag">Trials</div>
      <div class="notif-title">3 Players Shortlisted for U-18 National Squad</div>
      <div class="notif-time">Yesterday · Kasarani Arena</div>
    </div>
    <div class="notif-action">→</div>
  </div>

  <div class="notif-row reveal">
    <div class="notif-indicator"></div>
    <div class="notif-meta">
      <div class="notif-tag">Schedule</div>
      <div class="notif-title">New 6AM Sessions Added — Tuesday & Thursday</div>
      <div class="notif-time">2 days ago · Limited spots</div>
    </div>
    <div class="notif-action">→</div>
  </div>

</section>

<!-- ─── BLOG ─── -->
<section id="blog">

  <div class="blog-header">
    <h2 class="blog-h reveal">FAST-BREAK<br/><span class="col">STORIES</span></h2>
    <a href="#" class="blog-all-link reveal" data-mag>
      <span>All Stories</span>
      <div class="arrow-circle">→</div>
    </a>
  </div>

  <!-- FEATURED POST -->
  <div class="blog-featured reveal">

    <div class="blog-feat-img" id="feat-img">
      <div class="blog-feat-img-inner feat-img-1" id="feat-img-inner"></div>
    </div>

    <div class="blog-feat-body">
      <div>
        <div class="blog-feat-eyebrow">
          <span class="blog-feat-tag">● Featured · Technique</span>
          <span class="blog-feat-num">01 / 04</span>
        </div>
        <h3 class="blog-feat-title" id="feat-title">
          <span class="bw">The</span>
          <span class="bw">Penhold</span>
          <span class="bw">Grip</span>
          <span class="bw">Advantage</span>
          <span class="bw">in</span>
          <span class="bw">Modern</span>
          <span class="bw">Play</span>
        </h3>
        <p class="blog-feat-excerpt">How traditional Asian grip styles are reshaping competitive strategy across East African circuits — and why our Apex squad adopted it in 2023.</p>
      </div>
      <div class="blog-feat-footer">
        <div class="blog-feat-author">
          <div class="author-avatar" data-initials="DM" style="background:var(--orange);"></div>
          <div class="author-info">
            <div class="author-name">Coach David Mwangi</div>
            <div class="author-date">28 Jul 2025 · 6 min read</div>
          </div>
        </div>
        <a href="#" class="blog-read-btn" data-mag>
          <span>Read Story</span>
          <span class="btn-arrow">→</span>
        </a>
      </div>
    </div>

  </div>

  <!-- SMALL CARDS -->
  <div class="blog-grid">

    <div class="blog-card reveal" data-mag-card>
      <div class="blog-card-thumb">
        <div class="blog-card-thumb-inner thumb-2"></div>
        <span class="thumb-chip">Championship</span>
      </div>
      <div class="blog-card-body">
        <h4 class="blog-card-title">Inside the Q2 Nairobi Open: A Match-by-Match Breakdown</h4>
        <p class="blog-card-excerpt">We embedded with the squad for three days. Footwork, nerves, and one point that changed everything in the semifinal.</p>
        <div class="blog-card-footer">
          <span class="blog-card-date">14 Jul 2025 · 8 min</span>
          <a href="#" class="card-read-arrow" data-mag>→</a>
        </div>
      </div>
      <div class="blog-card-progress"></div>
    </div>

    <div class="blog-card reveal" data-mag-card>
      <div class="blog-card-thumb">
        <div class="blog-card-thumb-inner thumb-3"></div>
        <span class="thumb-chip">Mental Game</span>
      </div>
      <div class="blog-card-body">
        <h4 class="blog-card-title">What Elite TT Players Do Differently Under Pressure</h4>
        <p class="blog-card-excerpt">Sports psychologist Dr. Aisha Njeru breaks down the cognitive edge separating finalists from champions.</p>
        <div class="blog-card-footer">
          <span class="blog-card-date">30 Jun 2025 · 5 min</span>
          <a href="#" class="card-read-arrow" data-mag>→</a>
        </div>
      </div>
      <div class="blog-card-progress"></div>
    </div>

    <div class="blog-card reveal" data-mag-card>
      <div class="blog-card-thumb">
        <div class="blog-card-thumb-inner thumb-4"></div>
        <span class="thumb-chip">Community</span>
      </div>
      <div class="blog-card-body">
        <h4 class="blog-card-title">From Eastlands to the National Stage</h4>
        <p class="blog-card-excerpt">How St. Teresa's grassroots program turned three local kids into national prospects in under eighteen months.</p>
        <div class="blog-card-footer">
          <span class="blog-card-date">5 Jun 2025 · 4 min</span>
          <a href="#" class="card-read-arrow" data-mag>→</a>
        </div>
      </div>
      <div class="blog-card-progress"></div>
    </div>

  </div>

</section>

<!-- ─── JOIN CTA ─── -->
<section id="join">
  <div class="join-bg-word">APEX</div>
  <h2 class="join-hed reveal">
    READY TO<br/>
    <span class="col">JOIN?</span>
  </h2>
  <p class="join-sub reveal">One application. Three programs. Zero ceiling. Tell us where you are and we'll tell you where you're going.</p>
  <div class="mag-btn-wrap reveal" data-mag-btn>
    <button class="mag-btn" data-cursor="btn">
      <span>Start Your Application</span>
      <div class="mag-btn-icon">→</div>
    </button>
  </div>
</section>

<!-- ─── FOOTER ─── -->
<footer>
  <div class="foot-logo">ST. TERESA'S</div>
  <div class="foot-copy">
    © 2025 St. Teresa's Table Tennis · Nairobi, Kenya<br/>
    <a href="#">APEX Digital Experience</a>
  </div>
</footer>

<script>
gsap.registerPlugin(ScrollTrigger);

// ═══════════════════════════════════════════════
//  CURSOR — fluid lerp with morphing states
// ═══════════════════════════════════════════════
const cursorEl = document.getElementById('cursor');
const cursorBall = document.getElementById('cursor-ball');

let mouse = { x: -200, y: -200 };
let pos   = { x: -200, y: -200 };

document.addEventListener('mousemove', e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

// Smooth lerp loop — the core Lusion feel
(function tick() {
  // Lerp factors: pos follows mouse with lag
  pos.x += (mouse.x - pos.x) * 0.1;
  pos.y += (mouse.y - pos.y) * 0.1;
  cursorEl.style.transform = `translate(${pos.x}px, ${pos.y}px)`;
  requestAnimationFrame(tick);
})();

// Cursor state changes
document.querySelectorAll('[data-cursor="btn"]').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.className = 'cur-btn');
  el.addEventListener('mouseleave', () => document.body.className = '');
});
document.querySelectorAll('.notif-row, .prog-card').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.className = 'cur-card');
  el.addEventListener('mouseleave', () => document.body.className = '');
});
document.querySelectorAll('.mag-link, .card-arrow, .nav-logo').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.className = 'cur-link');
  el.addEventListener('mouseleave', () => document.body.className = '');
});
document.querySelectorAll('.about-body').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.className = 'cur-text');
  el.addEventListener('mouseleave', () => document.body.className = '');
});

// ═══════════════════════════════════════════════
//  MAGNETIC ELEMENTS — the signature Lusion pull
//  Elements physically move toward cursor
// ═══════════════════════════════════════════════
function addMagnetic(el, strength = 0.35) {
  el.addEventListener('mousemove', e => {
    const r = el.getBoundingClientRect();
    const cx = r.left + r.width / 2;
    const cy = r.top + r.height / 2;
    const dx = e.clientX - cx;
    const dy = e.clientY - cy;
    gsap.to(el, {
      x: dx * strength,
      y: dy * strength,
      duration: 0.4,
      ease: 'power2.out'
    });
  });
  el.addEventListener('mouseleave', () => {
    gsap.to(el, { x: 0, y: 0, duration: 0.7, ease: 'elastic.out(1, 0.4)' });
  });
}

// Apply to magnetic targets
document.querySelectorAll('[data-mag]').forEach(el => addMagnetic(el, 0.3));
document.querySelectorAll('.card-arrow').forEach(el => addMagnetic(el, 0.5));

// Big button — stronger magnetic field
document.querySelectorAll('[data-mag-btn]').forEach(wrap => {
  const btn = wrap.querySelector('.mag-btn');
  wrap.addEventListener('mousemove', e => {
    const r = btn.getBoundingClientRect();
    const cx = r.left + r.width / 2;
    const cy = r.top + r.height / 2;
    const dx = e.clientX - cx;
    const dy = e.clientY - cy;
    gsap.to(btn, {
      x: dx * 0.45,
      y: dy * 0.45,
      duration: 0.5,
      ease: 'power3.out'
    });
    // Inner icon moves MORE — parallax within button
    gsap.to(btn.querySelector('.mag-btn-icon'), {
      x: dx * 0.15,
      y: dy * 0.15,
      duration: 0.5,
      ease: 'power3.out'
    });
  });
  wrap.addEventListener('mouseleave', () => {
    gsap.to(btn, { x: 0, y: 0, duration: 0.9, ease: 'elastic.out(1, 0.35)' });
    gsap.to(btn.querySelector('.mag-btn-icon'), { x: 0, y: 0, duration: 0.9, ease: 'elastic.out(1, 0.35)' });
  });
});

// Card tilt — perspective tilt on prog cards
document.querySelectorAll('[data-mag-card]').forEach(card => {
  card.addEventListener('mousemove', e => {
    const r = card.getBoundingClientRect();
    const x = (e.clientX - r.left) / r.width  - 0.5;  // -0.5 to 0.5
    const y = (e.clientY - r.top)  / r.height - 0.5;
    gsap.to(card, {
      rotateY:  x * 6,
      rotateX: -y * 4,
      transformPerspective: 900,
      duration: 0.5,
      ease: 'power2.out'
    });
    // Subtle inner-shadow shift
    gsap.to(card.querySelector('.card-num'), {
      x: x * 14, y: y * 8,
      duration: 0.5, ease: 'power2.out'
    });
  });
  card.addEventListener('mouseleave', () => {
    gsap.to(card, {
      rotateY: 0, rotateX: 0,
      duration: 0.8, ease: 'elastic.out(1, 0.4)'
    });
    gsap.to(card.querySelector('.card-num'), {
      x: 0, y: 0, duration: 0.7, ease: 'elastic.out(1, 0.4)'
    });
  });
});

// ═══════════════════════════════════════════════
//  NAV — scrolled state
// ═══════════════════════════════════════════════
window.addEventListener('scroll', () => {
  document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 60);
}, { passive: true });

// ═══════════════════════════════════════════════
//  HERO ENTRANCE
// ═══════════════════════════════════════════════
gsap.set('.hero-hed .word', { y: '110%' });
gsap.set('.hero-sub', { opacity: 0, y: 20 });
gsap.set('#scroll-hint', { opacity: 0 });
gsap.set('#hero-aside', { opacity: 0, x: 20 });

const htl = gsap.timeline({ delay: 0.3 });
htl
  .to('.hero-hed .word', {
    y: '0%',
    duration: 1,
    ease: 'power4.out',
    stagger: 0.1
  })
  .to('.hero-sub',      { opacity: 1, y: 0, duration: 0.6, ease: 'power3.out' }, '-=0.4')
  .to('#scroll-hint',   { opacity: 1, duration: 0.5 }, '-=0.3')
  .to('#hero-aside',    { opacity: 1, x: 0, duration: 0.6, ease: 'power3.out' }, '-=0.4');

// ═══════════════════════════════════════════════
//  MARQUEE — speed reacts to scroll velocity
// ═══════════════════════════════════════════════
const mqEl = document.getElementById('mq');
const mqW  = mqEl.scrollWidth / 2;
let mqSpeed = 45;        // px/s base
let mqTarget = 45;
let mqX = 0;
let lastScrollY = 0;

gsap.ticker.add(() => {
  const scrollDelta = Math.abs(window.scrollY - lastScrollY);
  lastScrollY = window.scrollY;
  mqTarget = 45 + scrollDelta * 4;
  mqSpeed += (mqTarget - mqSpeed) * 0.08;

  mqX -= mqSpeed / 60;
  if (mqX <= -mqW) mqX += mqW;
  mqEl.style.transform = `translateX(${mqX}px)`;
});

// ═══════════════════════════════════════════════
//  ABOUT — word-weight reveal on scroll
//  Each word lights up as it enters viewport
// ═══════════════════════════════════════════════
const aboutWords = document.querySelectorAll('.about-body .w');
ScrollTrigger.create({
  trigger: '#about',
  start: 'top 80%',
  end: 'bottom 40%',
  scrub: 0.5,
  onUpdate: self => {
    const lit = Math.floor(self.progress * aboutWords.length);
    aboutWords.forEach((w, i) => {
      w.classList.toggle('lit', i < lit);
    });
  }
});

// ═══════════════════════════════════════════════
//  GENERIC SCROLL REVEALS
// ═══════════════════════════════════════════════
document.querySelectorAll('.reveal').forEach((el, i) => {
  ScrollTrigger.create({
    trigger: el,
    start: 'top 88%',
    once: true,
    onEnter: () => {
      gsap.to(el, {
        opacity: 1,
        y: 0,
        duration: 0.7,
        ease: 'power3.out',
        delay: el.dataset.delay || 0
      });
    }
  });
});

// ═══════════════════════════════════════════════
//  NOTIFICATION ROWS — stagger + hover line
// ═══════════════════════════════════════════════
ScrollTrigger.create({
  trigger: '#notifs',
  start: 'top 75%',
  once: true,
  onEnter: () => {
    gsap.from('.notif-row', {
      opacity: 0,
      y: 30,
      duration: 0.55,
      ease: 'power3.out',
      stagger: 0.08
    });
  }
});

// Notif title shimmer on row hover
document.querySelectorAll('.notif-row').forEach(row => {
  const title = row.querySelector('.notif-title');
  row.addEventListener('mouseenter', () => {
    gsap.to(title, { x: 8, duration: 0.4, ease: 'power2.out' });
  });
  row.addEventListener('mouseleave', () => {
    gsap.to(title, { x: 0, duration: 0.5, ease: 'elastic.out(1, 0.5)' });
  });
});

// ═══════════════════════════════════════════════
//  JOIN BG WORD — rotates slowly on scroll
// ═══════════════════════════════════════════════
ScrollTrigger.create({
  trigger: '#join',
  start: 'top bottom',
  end: 'bottom top',
  scrub: 2,
  onUpdate: self => {
    gsap.set('.join-bg-word', {
      rotation: self.progress * 8 - 4,
      scale: 0.95 + self.progress * 0.1
    });
  }
});

// ═══════════════════════════════════════════════
//  BLOG — cursor-follows-image inside featured card
//  + title word stagger on hover
//  + card magnetic tilt (reuses addMagnetic)
// ═══════════════════════════════════════════════

// Featured image: image layer chases cursor within the card bounds
const featImg     = document.getElementById('feat-img');
const featInner   = document.getElementById('feat-img-inner');

if (featImg && featInner) {
  let imgLerpX = 0, imgLerpY = 0;
  let imgTargetX = 0, imgTargetY = 0;
  let imgActive = false;

  featImg.addEventListener('mouseenter', () => { imgActive = true; });
  featImg.addEventListener('mouseleave', () => {
    imgActive = false;
    imgTargetX = 0; imgTargetY = 0;
  });
  featImg.addEventListener('mousemove', e => {
    const r = featImg.getBoundingClientRect();
    // Map cursor to -1 → +1 range inside card
    imgTargetX = ((e.clientX - r.left) / r.width  - 0.5) * 22;
    imgTargetY = ((e.clientY - r.top)  / r.height - 0.5) * 16;
  });

  // Lerp loop for the image — separate from cursor loop
  (function imgTick() {
    imgLerpX += (imgTargetX - imgLerpX) * 0.07;
    imgLerpY += (imgTargetY - imgLerpY) * 0.07;
    featInner.style.transform = `translate(${imgLerpX}px, ${imgLerpY}px) scale(1.02)`;
    requestAnimationFrame(imgTick);
  })();
}

// Featured title: words ripple outward from cursor position on hover
const featTitle = document.getElementById('feat-title');
if (featTitle) {
  const words = featTitle.querySelectorAll('.bw');
  featTitle.addEventListener('mouseenter', () => {
    words.forEach((w, i) => {
      gsap.to(w, {
        y: -6,
        opacity: 0.5,
        duration: 0.3,
        delay: i * 0.04,
        ease: 'power2.out',
        yoyo: true,
        repeat: 1
      });
    });
  });
}

// Blog small cards: cursor-follow on thumbnail + magnetic card arrows
document.querySelectorAll('.blog-card').forEach(card => {
  const thumb = card.querySelector('.blog-card-thumb-inner');
  if (!thumb) return;

  let bx = 0, by = 0, btx = 0, bty = 0;
  let bActive = false;

  card.addEventListener('mouseenter', () => { bActive = true; });
  card.addEventListener('mouseleave', () => {
    bActive = false;
    btx = 0; bty = 0;
  });
  card.addEventListener('mousemove', e => {
    const r = card.getBoundingClientRect();
    btx = ((e.clientX - r.left) / r.width  - 0.5) * 14;
    bty = ((e.clientY - r.top)  / r.height - 0.5) * 10;
  });

  // Individual lerp per card
  (function bTick() {
    bx += (btx - bx) * 0.08;
    by += (bty - by) * 0.08;
    thumb.style.transform = `translate(${bx}px, ${by}px)`;
    requestAnimationFrame(bTick);
  })();
});

// Apply magnetic pull to blog card read arrows
document.querySelectorAll('.card-read-arrow').forEach(el => addMagnetic(el, 0.55));

// Blog section scroll reveal — staggered
ScrollTrigger.create({
  trigger: '#blog',
  start: 'top 75%',
  once: true,
  onEnter: () => {
    gsap.from('.blog-featured', {
      opacity: 0, y: 50, duration: 0.7, ease: 'power3.out'
    });
    gsap.from('.blog-card', {
      opacity: 0, y: 40, duration: 0.65, ease: 'power3.out',
      stagger: 0.1, delay: 0.15
    });
  }
});

// Cursor state for blog cards
document.querySelectorAll('.blog-card, .blog-feat-img').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.className = 'cur-card');
  el.addEventListener('mouseleave', () => document.body.className = '');
});
document.querySelectorAll('.blog-all-link, .blog-read-btn').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.className = 'cur-link');
  el.addEventListener('mouseleave', () => document.body.className = '');
});

// ═══════════════════════════════════════════════
//  PROGRAMS SECTION — stagger in
// ═══════════════════════════════════════════════
ScrollTrigger.create({
  trigger: '#programs',
  start: 'top 70%',
  once: true,
  onEnter: () => {
    gsap.from('.prog-card', {
      opacity: 0,
      y: 50,
      duration: 0.7,
      ease: 'power3.out',
      stagger: 0.12
    });
  }
});

</script>
</body>
</html>
